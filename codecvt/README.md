text.us.utf8 sample comes from https://unicode.org/faq/utf_bom.html

text.jp.utf8 and text.zh.utf8 are generated by google-translate.

unicode and gb18030 texts generated by iconv.

```
30325  codecvt/text.jp.gb18030
34542  codecvt/text.jp.unicode
  118  codecvt/text.jp.unicode.s
43331  codecvt/text.jp.utf8
  144  codecvt/text.jp.utf8.s
32071  codecvt/text.us.gb18030
64144  codecvt/text.us.unicode
32071  codecvt/text.us.utf8
20188  codecvt/text.zh.gb18030
24254  codecvt/text.zh.unicode
  328  codecvt/text.zh.unicode.s
28229  codecvt/text.zh.utf8
  329  codecvt/text.zh.utf8.s
```

**benchmark projects:**
* convertion
1. iconv
2. icu
3. c++11 codecvt
* iterate
1. utf8cpp
2. icu

**case 1**

short strings.

iconv, icu and std::codecvt all generate std::string result.

iconv and icu use 512B buffer.
```
Run on (8 X 1391 MHz CPU s)
--------------------------------------------------------------------------
Benchmark                                Time             CPU   Iterations
--------------------------------------------------------------------------
BM_icu_jps_utf82unicode/512/1         1441 ns         1441 ns       466511
BM_iconv_jps_utf82unicode/512/1       2278 ns         2277 ns       307141
BM_codecvt_jps_utf82unicode/0         8307 ns         8302 ns        83635
--------------------------------------------------------------------------
BM_icu_jps_unicode2utf8/512/1         1511 ns         1511 ns       464579
BM_iconv_jps_unicode2utf8/512/1       2404 ns         2403 ns       290769
BM_codecvt_jps_unicode2utf8/0         1617 ns         1617 ns       431922
--------------------------------------------------------------------------
BM_icu_zhs_utf82unicode/512/1         2114 ns         2113 ns       320974
BM_iconv_zhs_utf82unicode/512/1       3273 ns         3271 ns       213220
BM_codecvt_zhs_utf82unicode/0        16714 ns        16713 ns        41642
--------------------------------------------------------------------------
BM_icu_zhs_unicode2utf8/512/1         3458 ns         3458 ns       201838
BM_iconv_zhs_unicode2utf8/512/1       3545 ns         3545 ns       197634
BM_codecvt_zhs_unicode2utf8/0         2847 ns         2847 ns       245213
```

**case 2**

32k long strings.

iconv, icu and std::codecvt all generate std::string result.

iconv and icu use 512B and 16KB buffer.
```
--------------------------------------------------------------------------
Benchmark                                Time             CPU   Iterations
--------------------------------------------------------------------------
BM_iconv_us_utf82unicode/512/1     1777182 ns      1777035 ns          391
BM_iconv_zh_utf82unicode/512/1     2246908 ns      2245508 ns          303
BM_iconv_jp_utf82unicode/512/1     3758826 ns      3758746 ns          186
BM_iconv_us_unicode2utf8/512/1     1508350 ns      1508149 ns          464
BM_iconv_zh_unicode2utf8/512/1     1036028 ns      1036030 ns          672
BM_iconv_jp_unicode2utf8/512/1     1808811 ns      1808816 ns          383

BM_icu_us_utf82unicode/512/1         63485 ns        63485 ns        10955
BM_icu_zh_utf82unicode/512/1        125597 ns       125595 ns         5563
BM_icu_jp_utf82unicode/512/1        189859 ns       189859 ns         3673
BM_icu_us_unicode2utf8/512/1        365970 ns       365971 ns         1888
BM_icu_zh_unicode2utf8/512/1        192194 ns       192191 ns         3621
BM_icu_jp_unicode2utf8/512/1        312745 ns       312746 ns         2216

BM_codecvt_us_utf82unicode/0       1475513 ns      1475484 ns          472
BM_codecvt_zh_utf82unicode/0       1260513 ns      1260462 ns          554
BM_codecvt_jp_utf82unicode/0       1917370 ns      1917317 ns          364
BM_codecvt_us_unicode2utf8/0        185486 ns       185482 ns         3758
BM_codecvt_zh_unicode2utf8/0        141275 ns       141270 ns         4913
BM_codecvt_jp_unicode2utf8/0        207942 ns       207943 ns         3359

BM_iconv_us_utf82unicode/16384/1    229028 ns       229021 ns         2933
BM_iconv_zh_utf82unicode/16384/1    172077 ns       172072 ns         4052
BM_iconv_jp_utf82unicode/16384/1    298523 ns       298515 ns         2326
BM_iconv_us_unicode2utf8/16384/1    242001 ns       241994 ns         2883
BM_iconv_zh_unicode2utf8/16384/1    157954 ns       157950 ns         4408
BM_iconv_jp_unicode2utf8/16384/1    254203 ns       254204 ns         2723

BM_icu_us_utf82unicode/16384/1      103033 ns       103034 ns         6608
BM_icu_zh_utf82unicode/16384/1      124505 ns       124504 ns         5603
BM_icu_jp_utf82unicode/16384/1      186566 ns       186551 ns         3737
BM_icu_us_unicode2utf8/16384/1      359124 ns       359110 ns         1928
BM_icu_zh_unicode2utf8/16384/1      229484 ns       229477 ns         3015
BM_icu_jp_unicode2utf8/16384/1      307557 ns       307550 ns         2251

```

**simple conclustion**

icu is fastest in almost cases. 

std::codecvt is easiest to use.

icu is especially good at toUnicode, while std::codecvt is especially bad at UTF8toUnicode. 

std::codecvt is especially good at UnicodetoUTF8, it plays fastest.

iconv using more buffer can play better, while icu nearly does not need more.

**other**
if you are working in windows platform, you can referent to this post https://github.com/GiovanniDicanio/UnicodeConversions.
